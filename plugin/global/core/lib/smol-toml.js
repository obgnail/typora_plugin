var A=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var H=Object.getOwnPropertyNames;var Q=Object.prototype.hasOwnProperty;var Z=e=>{throw TypeError(e)};var W=(e,n)=>{for(var t in n)A(e,t,{get:n[t],enumerable:!0})},B=(e,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of H(n))!Q.call(e,r)&&r!==t&&A(e,r,{get:()=>n[r],enumerable:!(i=J(n,r))||i.enumerable});return e};var ee=e=>B(A({},"__esModule",{value:!0}),e);var j=(e,n,t)=>n.has(e)||Z("Cannot "+t);var m=(e,n,t)=>(j(e,n,"read from private field"),t?t.call(e):n.get(e)),$=(e,n,t)=>n.has(e)?Z("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),g=(e,n,t,i)=>(j(e,n,"write to private field"),i?i.call(e,t):n.set(e,t),t);var he={};W(he,{TomlDate:()=>T,TomlError:()=>u,parse:()=>K,stringify:()=>Y});module.exports=ee(he);function ne(e,n){let t=e.slice(0,n).split(/\r\n|\n|\r/g);return[t.length,t.pop().length+1]}function te(e,n,t){let i=e.split(/\r\n|\n|\r/g),r="",o=(Math.log10(n+1)|0)+1;for(let l=n-1;l<=n+1;l++){let f=i[l-1];f&&(r+=l.toString().padEnd(o," "),r+=":  ",r+=f,r+=`
`,l===n&&(r+=" ".repeat(o+t+2),r+=`^
`))}return r}var u=class extends Error{line;column;codeblock;constructor(n,t){let[i,r]=ne(t.toml,t.ptr),o=te(t.toml,i,r);super(`Invalid TOML document: ${n}

${o}`,t),this.line=i,this.column=r,this.codeblock=o}};function ie(e,n){let t=0;for(;e[n-++t]==="\\";);return--t&&t%2}function b(e,n=0,t=e.length){let i=e.indexOf(`
`,n);return e[i-1]==="\r"&&i--,i<=t?i:-1}function O(e,n){for(let t=n;t<e.length;t++){let i=e[t];if(i===`
`)return t;if(i==="\r"&&e[t+1]===`
`)return t+1;if(i<" "&&i!=="	"||i==="\x7F")throw new u("control characters are not allowed in comments",{toml:e,ptr:n})}return e.length}function h(e,n,t,i){let r;for(;(r=e[n])===" "||r==="	"||!t&&(r===`
`||r==="\r"&&e[n+1]===`
`);)n++;return i||r!=="#"?n:h(e,O(e,n),t)}function V(e,n,t,i,r=!1){if(!i)return n=b(e,n),n<0?e.length:n;for(let o=n;o<e.length;o++){let l=e[o];if(l==="#")o=b(e,o);else{if(l===t)return o+1;if(l===i||r&&(l===`
`||l==="\r"&&e[o+1]===`
`))return o}}throw new u("cannot find end of structure",{toml:e,ptr:n})}function I(e,n){let t=e[n],i=t===e[n+1]&&e[n+1]===e[n+2]?e.slice(n,n+3):t;n+=i.length-1;do n=e.indexOf(i,++n);while(n>-1&&t!=="'"&&ie(e,n));return n>-1&&(n+=i.length,i.length>1&&(e[n]===t&&n++,e[n]===t&&n++)),n}var le=/^(\d{4}-\d{2}-\d{2})?[T ]?(?:(\d{2}):\d{2}:\d{2}(?:\.\d+)?)?(Z|[-+]\d{2}:\d{2})?$/i,p,y,w,E=class E extends Date{constructor(t){let i=!0,r=!0,o="Z";if(typeof t=="string"){let l=t.match(le);l?(l[1]||(i=!1,t=`0000-01-01T${t}`),r=!!l[2],r&&t[10]===" "&&(t=t.replace(" ","T")),l[2]&&+l[2]>23?t="":(o=l[3]||null,t=t.toUpperCase(),!o&&r&&(t+="Z"))):t=""}super(t);$(this,p,!1);$(this,y,!1);$(this,w,null);isNaN(this.getTime())||(g(this,p,i),g(this,y,r),g(this,w,o))}isDateTime(){return m(this,p)&&m(this,y)}isLocal(){return!m(this,p)||!m(this,y)||!m(this,w)}isDate(){return m(this,p)&&!m(this,y)}isTime(){return m(this,y)&&!m(this,p)}isValid(){return m(this,p)||m(this,y)}toISOString(){let t=super.toISOString();if(this.isDate())return t.slice(0,10);if(this.isTime())return t.slice(11,23);if(m(this,w)===null)return t.slice(0,-1);if(m(this,w)==="Z")return t;let i=+m(this,w).slice(1,3)*60+ +m(this,w).slice(4,6);return i=m(this,w)[0]==="-"?i:-i,new Date(this.getTime()-i*6e4).toISOString().slice(0,-1)+m(this,w)}static wrapAsOffsetDateTime(t,i="Z"){let r=new E(t);return g(r,w,i),r}static wrapAsLocalDateTime(t){let i=new E(t);return g(i,w,null),i}static wrapAsLocalDate(t){let i=new E(t);return g(i,y,!1),g(i,w,null),i}static wrapAsLocalTime(t){let i=new E(t);return g(i,p,!1),g(i,w,null),i}};p=new WeakMap,y=new WeakMap,w=new WeakMap;var T=E;var re=/^((0x[0-9a-fA-F](_?[0-9a-fA-F])*)|(([+-]|0[ob])?\d(_?\d)*))$/,oe=/^[+-]?\d(_?\d)*(\.\d(_?\d)*)?([eE][+-]?\d(_?\d)*)?$/,fe=/^[+-]?0[0-9_]/,ae=/^[0-9a-f]{4,8}$/i,z={b:"\b",t:"	",n:`
`,f:"\f",r:"\r",'"':'"',"\\":"\\"};function N(e,n=0,t=e.length){let i=e[n]==="'",r=e[n++]===e[n]&&e[n]===e[n+1];r&&(t-=2,e[n+=2]==="\r"&&n++,e[n]===`
`&&n++);let o=0,l,f="",c=n;for(;n<t-1;){let a=e[n++];if(a===`
`||a==="\r"&&e[n]===`
`){if(!r)throw new u("newlines are not allowed in strings",{toml:e,ptr:n-1})}else if(a<" "&&a!=="	"||a==="\x7F")throw new u("control characters are not allowed in strings",{toml:e,ptr:n-1});if(l){if(l=!1,a==="u"||a==="U"){let d=e.slice(n,n+=a==="u"?4:8);if(!ae.test(d))throw new u("invalid unicode escape",{toml:e,ptr:o});try{f+=String.fromCodePoint(parseInt(d,16))}catch{throw new u("invalid unicode escape",{toml:e,ptr:o})}}else if(r&&(a===`
`||a===" "||a==="	"||a==="\r")){if(n=h(e,n-1,!0),e[n]!==`
`&&e[n]!=="\r")throw new u("invalid escape: only line-ending whitespace may be escaped",{toml:e,ptr:o});n=h(e,n)}else if(a in z)f+=z[a];else throw new u("unrecognized escape sequence",{toml:e,ptr:o});c=n}else!i&&a==="\\"&&(o=n-1,l=!0,f+=e.slice(c,o))}return f+e.slice(c,t-1)}function M(e,n,t,i){if(e==="true")return!0;if(e==="false")return!1;if(e==="-inf")return-1/0;if(e==="inf"||e==="+inf")return 1/0;if(e==="nan"||e==="+nan"||e==="-nan")return NaN;if(e==="-0")return i?0n:0;let r=re.test(e);if(r||oe.test(e)){if(fe.test(e))throw new u("leading zeroes are not allowed",{toml:n,ptr:t});e=e.replace(/_/g,"");let l=+e;if(isNaN(l))throw new u("invalid number",{toml:n,ptr:t});if(r){if((r=!Number.isSafeInteger(l))&&!i)throw new u("integer value cannot be represented losslessly",{toml:n,ptr:t});(r||i===!0)&&(l=BigInt(e))}return l}let o=new T(e);if(!o.isValid())throw new u("invalid value",{toml:n,ptr:t});return o}function ue(e,n,t,i){let r=e.slice(n,t),o=r.indexOf("#");o>-1&&(O(e,o),r=r.slice(0,o));let l=r.trimEnd();if(!i){let f=r.indexOf(`
`,l.length);if(f>-1)throw new u("newlines are not allowed in inline tables",{toml:e,ptr:n+f})}return[l,o]}function S(e,n,t,i,r){if(i===0)throw new u("document contains excessively nested structures. aborting.",{toml:e,ptr:n});let o=e[n];if(o==="["||o==="{"){let[c,a]=o==="["?G(e,n,i,r):v(e,n,i,r),d=t?V(e,a,",",t):a;if(a-d&&t==="}"){let s=b(e,a,d);if(s>-1)throw new u("newlines are not allowed in inline tables",{toml:e,ptr:s})}return[c,d]}let l;if(o==='"'||o==="'"){l=I(e,n);let c=N(e,n,l);if(t){if(l=h(e,l,t!=="]"),e[l]&&e[l]!==","&&e[l]!==t&&e[l]!==`
`&&e[l]!=="\r")throw new u("unexpected character encountered",{toml:e,ptr:l});l+=+(e[l]===",")}return[c,l]}l=V(e,n,",",t);let f=ue(e,n,l-+(e[l-1]===","),t==="]");if(!f[0])throw new u("incomplete key-value declaration: no value specified",{toml:e,ptr:n});return t&&f[1]>-1&&(l=h(e,n+f[1]),l+=+(e[l]===",")),[M(f[0],e,n,r),l]}var ce=/^[a-zA-Z0-9-_]+[ \t]*$/;function D(e,n,t="="){let i=n-1,r=[],o=e.indexOf(t,n);if(o<0)throw new u("incomplete key-value: cannot find end of key",{toml:e,ptr:n});do{let l=e[n=++i];if(l!==" "&&l!=="	")if(l==='"'||l==="'"){if(l===e[n+1]&&l===e[n+2])throw new u("multiline strings are not allowed in keys",{toml:e,ptr:n});let f=I(e,n);if(f<0)throw new u("unfinished string encountered",{toml:e,ptr:n});i=e.indexOf(".",f);let c=e.slice(f,i<0||i>o?o:i),a=b(c);if(a>-1)throw new u("newlines are not allowed in keys",{toml:e,ptr:n+i+a});if(c.trimStart())throw new u("found extra tokens after the string part",{toml:e,ptr:f});if(o<f&&(o=e.indexOf(t,f),o<0))throw new u("incomplete key-value: cannot find end of key",{toml:e,ptr:n});r.push(N(e,n,f))}else{i=e.indexOf(".",n);let f=e.slice(n,i<0||i>o?o:i);if(!ce.test(f))throw new u("only letter, numbers, dashes and underscores are allowed in keys",{toml:e,ptr:n});r.push(f.trimEnd())}}while(i+1&&i<o);return[r,h(e,o+1,!0,!0)]}function v(e,n,t,i){let r={},o=new Set,l,f=0;for(n++;(l=e[n++])!=="}"&&l;){let c={toml:e,ptr:n-1};if(l===`
`)throw new u("newlines are not allowed in inline tables",c);if(l==="#")throw new u("inline tables cannot contain comments",c);if(l===",")throw new u("expected key-value, found comma",c);if(l!==" "&&l!=="	"){let a,d=r,s=!1,[x,q]=D(e,n-1);for(let k=0;k<x.length;k++){if(k&&(d=s?d[a]:d[a]={}),a=x[k],(s=Object.hasOwn(d,a))&&(typeof d[a]!="object"||o.has(d[a])))throw new u("trying to redefine an already defined value",{toml:e,ptr:n});!s&&a==="__proto__"&&Object.defineProperty(d,a,{enumerable:!0,configurable:!0,writable:!0})}if(s)throw new u("trying to redefine an already defined value",{toml:e,ptr:n});let[R,F]=S(e,q,"}",t-1,i);o.add(R),d[a]=R,n=F,f=e[n-1]===","?n-1:0}}if(f)throw new u("trailing commas are not allowed in inline tables",{toml:e,ptr:f});if(!l)throw new u("unfinished table encountered",{toml:e,ptr:n});return[r,n]}function G(e,n,t,i){let r=[],o;for(n++;(o=e[n++])!=="]"&&o;){if(o===",")throw new u("expected value, found comma",{toml:e,ptr:n-1});if(o==="#")n=O(e,n);else if(o!==" "&&o!=="	"&&o!==`
`&&o!=="\r"){let l=S(e,n-1,"]",t-1,i);r.push(l[0]),n=l[1]}}if(!o)throw new u("unfinished array encountered",{toml:e,ptr:n});return[r,n]}function U(e,n,t,i){var a,d;let r=n,o=t,l,f=!1,c;for(let s=0;s<e.length;s++){if(s){if(r=f?r[l]:r[l]={},o=(c=o[l]).c,i===0&&(c.t===1||c.t===2))return null;if(c.t===2){let x=r.length-1;r=r[x],o=o[x].c}}if(l=e[s],(f=Object.hasOwn(r,l))&&((a=o[l])==null?void 0:a.t)===0&&((d=o[l])!=null&&d.d))return null;f||(l==="__proto__"&&(Object.defineProperty(r,l,{enumerable:!0,configurable:!0,writable:!0}),Object.defineProperty(o,l,{enumerable:!0,configurable:!0,writable:!0})),o[l]={t:s<e.length-1&&i===2?3:i,d:!1,i:0,c:{}})}if(c=o[l],c.t!==i&&!(i===1&&c.t===3)||(i===2&&(c.d||(c.d=!0,r[l]=[]),r[l].push(r={}),c.c[c.i++]=c={t:1,d:!1,i:0,c:{}}),c.d))return null;if(c.d=!0,i===1)r=f?r[l]:r[l]={};else if(i===0&&f)return null;return[l,r,c.c]}function K(e,{maxDepth:n=1e3,integersAsBigInt:t}={}){let i={},r={},o=i,l=r;for(let f=h(e,0);f<e.length;){if(e[f]==="["){let c=e[++f]==="[",a=D(e,f+=+c,"]");if(c){if(e[a[1]-1]!=="]")throw new u("expected end of table declaration",{toml:e,ptr:a[1]-1});a[1]++}let d=U(a[0],i,r,c?2:1);if(!d)throw new u("trying to redefine an already defined table or value",{toml:e,ptr:f});l=d[2],o=d[1],f=a[1]}else{let c=D(e,f),a=U(c[0],o,l,0);if(!a)throw new u("trying to redefine an already defined table or value",{toml:e,ptr:f});let d=S(e,c[1],void 0,n,t);a[1][a[0]]=d[0],f=d[1]}if(f=h(e,f,!0),e[f]&&e[f]!==`
`&&e[f]!=="\r")throw new u("each key-value declaration must be followed by an end-of-line",{toml:e,ptr:f});f=h(e,f)}return i}var X=/^[a-z0-9-_]+$/i;function _(e){let n=typeof e;if(n==="object"){if(Array.isArray(e))return"array";if(e instanceof Date)return"date"}return n}function de(e){for(let n=0;n<e.length;n++)if(_(e[n])!=="object")return!1;return e.length!=0}function C(e){return JSON.stringify(e).replace(/\x7f/g,"\\u007f")}function L(e,n,t,i){if(t===0)throw new Error("Could not stringify the object: maximum object depth exceeded");if(n==="number")return isNaN(e)?"nan":e===1/0?"inf":e===-1/0?"-inf":i&&Number.isInteger(e)?e.toFixed(1):e.toString();if(n==="bigint"||n==="boolean")return e.toString();if(n==="string")return C(e);if(n==="date"){if(isNaN(e.getTime()))throw new TypeError("cannot serialize invalid date");return e.toISOString()}if(n==="object")return se(e,t,i);if(n==="array")return me(e,t,i)}function se(e,n,t){let i=Object.keys(e);if(i.length===0)return"{}";let r="{ ";for(let o=0;o<i.length;o++){let l=i[o];o&&(r+=", "),r+=X.test(l)?l:C(l),r+=" = ",r+=L(e[l],_(e[l]),n-1,t)}return r+" }"}function me(e,n,t){if(e.length===0)return"[]";let i="[ ";for(let r=0;r<e.length;r++){if(r&&(i+=", "),e[r]===null||e[r]===void 0)throw new TypeError("arrays cannot contain null or undefined values");i+=L(e[r],_(e[r]),n-1,t)}return i+" ]"}function we(e,n,t,i){if(t===0)throw new Error("Could not stringify the object: maximum object depth exceeded");let r="";for(let o=0;o<e.length;o++)r+=`${r&&`
`}[[${n}]]
`,r+=P(0,e[o],n,t,i);return r}function P(e,n,t,i,r){if(i===0)throw new Error("Could not stringify the object: maximum object depth exceeded");let o="",l="",f=Object.keys(n);for(let c=0;c<f.length;c++){let a=f[c];if(n[a]!==null&&n[a]!==void 0){let d=_(n[a]);if(d==="symbol"||d==="function")throw new TypeError(`cannot serialize values of type '${d}'`);let s=X.test(a)?a:C(a);if(d==="array"&&de(n[a]))l+=(l&&`
`)+we(n[a],t?`${t}.${s}`:s,i-1,r);else if(d==="object"){let x=t?`${t}.${s}`:s;l+=(l&&`
`)+P(x,n[a],x,i-1,r)}else o+=s,o+=" = ",o+=L(n[a],d,i,r),o+=`
`}}return e&&(o||!l)&&(o=o?`[${e}]
${o}`:`[${e}]`),o&&l?`${o}
${l}`:o||l}function Y(e,{maxDepth:n=1e3,numbersAsFloat:t=!1}={}){if(_(e)!=="object")throw new TypeError("stringify can only be called with an object");let i=P(0,e,"",n,t);return i[i.length-1]!==`
`?i+`
`:i}0&&(module.exports={TomlDate,TomlError,parse,stringify});
